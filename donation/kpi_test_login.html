<!DOCTYPE html>
<html>
<head>
    <title>KPI Dashboard Test Login</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .info { background: #e7f3ff; padding: 15px; border-radius: 4px; margin-bottom: 20px; }
        .success { background: #d4edda; padding: 15px; border-radius: 4px; margin-bottom: 20px; color: #155724; }
    </style>
</head>
<body>
    <h1>ðŸŽ¯ Donor Dashboard KPI Test</h1>
    
    <div class="success">
        <strong>âœ… Implementation Complete!</strong><br>
        The donor dashboard has been enhanced with real-time KPI calculations using SQL queries.
    </div>
    
    <div class="info">
        <strong>ðŸ“Š Enhanced Features:</strong>
        <ul>
            <li>Total Donations Count</li>
            <li>Items Delivered vs Pending</li>
            <li>Total Items Donated</li>
            <li>Average Rating from Feedback</li>
            <li>Detailed Status Breakdown</li>
            <li>SQL Query Debug Information</li>
        </ul>
    </div>
    
    <h2>Test the Enhanced Dashboard</h2>
    <p>Use the form below to login and test the KPI functionality:</p>
    
    <form action="http://127.0.0.1:8000/login/" method="post">
        <div class="form-group">
            <label>Email:</label>
            <input type="email" name="email" value="kpi.test@example.com" required>
        </div>
        
        <div class="form-group">
            <label>Password:</label>
            <input type="password" name="password" value="kpitest123" required>
        </div>
        
        <div class="form-group">
            <label>Role:</label>
            <select name="role">
                <option value="donor" selected>Donor</option>
                <option value="recipient">Recipient</option>
                <option value="ngo_admin">NGO Admin</option>
            </select>
        </div>
        
        <button type="submit">Login & Test KPIs</button>
    </form>
    
    <h3>Expected KPI Values (Test Data)</h3>
    <ul>
        <li><strong>Total Donations:</strong> 5</li>
        <li><strong>Items Delivered:</strong> 3</li>
        <li><strong>Total Items Donated:</strong> 21</li>
        <li><strong>Average Rating:</strong> 4.7/5</li>
        <li><strong>Pending Donations:</strong> 2</li>
    </ul>
    
    <h3>Code Changes Summary</h3>
    <div class="info">
        <strong>Files Modified:</strong>
        <ol>
            <li><code>frontend/views.py</code> - Added run_select helper and KPI logic</li>
            <li><code>donor_dashboard.html</code> - Updated template with KPI displays</li>
        </ol>
        
        <strong>Key Features:</strong>
        <ul>
            <li>Raw SQL queries for optimal performance</li>
            <li>Real-time data from donations and feedback tables</li>
            <li>Proper error handling for missing data</li>
            <li>Debug information for SQL queries</li>
            <li>Responsive dashboard layout</li>
        </ul>
    </div>
    
    <p><strong>Direct Link:</strong> <a href="http://127.0.0.1:8000/login/" target="_blank">http://127.0.0.1:8000/login/</a></p>
</body>
</html>